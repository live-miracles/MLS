<!doctype html>
<html lang="en" data-theme="dim">
  <head>
    <meta charset="UTF-8" />
    <title>Dashboard</title>
    <link rel="icon" type="image/png" href="logo.png" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="output.css" />
    <script type="text/javascript" src="jsmpeg.min.js"></script>
    <script type="text/javascript" src="tools.js"></script>
    <script type="text/javascript" src="jsmpeg.js" defer></script>
    <script type="text/javascript" src="dashboard.js" defer></script>
  </head>
  <body class="bg-base-100 text-base-content flex h-screen flex-col">
    <div class="navbar bg-base-100 shrink-0">
      <div class="flex-1">
        <a class="btn btn-ghost text-xl" href="/" id="server-name">MLS</a>
      </div>
      <div class="flex-none">
        <ul class="menu menu-horizontal px-1">
          <li><a href="/" class="dynamic-params">Control</a></li>
          <li><a href="/settings.html" class="dynamic-params">Settings</a></li>
          <li>
            <a href="/stat" target="_blank" t>Stats</a>
          </li>
          <li><a href="/recording" target="_blank">Recordings</a></li>
          <li><a href="/config.php?proclist" target="_blank">Processes</a></li>
          <li><a href="https://github.com/isha-live/MLS" target="_blank">GitHub</a></li>
        </ul>
      </div>
    </div>

    <div class="grid min-h-0 flex-1 grid-cols-[300px_1fr_1fr] gap-4 p-4 pt-0">
      <!-- Left Column -->
      <div class="bg-base-300 rounded-box w-full">
        <ul class="menu rounded-box w-full" id="pipelines"></ul>
      </div>

      <!-- Middle Column -->
      <div class="bg-base-200 rounded-xl p-4 shadow">
        <div class="stats shadow">
          <div class="stat">
            <div class="stat-title">CPU</div>
            <div class="stat-value text-lg" id="cpu-info"></div>
          </div>
          <div class="stat">
            <div class="stat-title">RAM</div>
            <div class="stat-value text-lg" id="ram-info"></div>
          </div>
          <div class="stat">
            <div class="stat-title">Disk</div>
            <div class="stat-value text-lg" id="disk-info"></div>
          </div>
        </div>
        <div class="stats shadow">
          <div class="stat">
            <div class="stat-title">Download</div>
            <div class="stat-value text-lg" id="downlink-info"></div>
          </div>
          <div class="stat">
            <div class="stat-title">Upload</div>
            <div class="stat-value text-lg" id="uplink-info"></div>
          </div>
        </div>

        <div class="divider"></div>
        <div id="pipe-info">
          <h2 class="mb-3 text-xl font-bold" id="pipe-name">English</h2>

          <div class="jsmpeg text-center" id="video-player">
            <canvas width="300" height="169" id="video-canvas" class="inline border border-solid border-gray-400"></canvas>
            <p id="stream1">
              <a href="javascript:void(0);" onclick="genericFunction('player.php?appname=main&streamname=', jsmpegPlay, this)" class="mx-1">
                <i class="material-icons text-3xl">play_arrow</i>M</a
              >
              <a href="javascript:void(0);" onclick="genericFunction('player.php?appname=backup&streamname=', jsmpegPlay, this)" class="mx-1">
                <i class="material-icons text-3xl">play_arrow</i>B</a
              >
              <a href="javascript:void(0);" onclick="genericFunction('player.php?appname=distribute&streamname=', jsmpegPlay, this)" class="mx-1">
                <i class="material-icons text-3xl">play_arrow</i>D</a
              >
              <a href="javascript:void(0);" onclick="jsmpegStop()" class="mx-1"><i class="material-icons text-3xl">stop</i></a>
              <a href="javascript:void(0);" onclick="jsmpegVolumeup()" class="mx-1"><i class="material-icons text-3xl">volume_up</i></a>
              <a href="javascript:void(0);" onclick="jsmpegVolumedown()" class="mx-1"><i class="material-icons text-3xl">volume_down</i></a>
            </p>
          </div>

          <div id="input-stats">
            <h2 class="text-lg">Video</h2>
            <div class="stats mt-1 shadow">
              <div class="stat">
                <div class="stat-title">Codec</div>
                <div class="stat-value text-lg" id="input-video-codec"></div>
              </div>

              <div class="stat">
                <div class="stat-title">Resolution</div>
                <div class="stat-value text-lg" id="input-video-resolution"></div>
              </div>

              <div class="stat">
                <div class="stat-title">FPS</div>
                <div class="stat-value text-lg" id="input-video-fps"></div>
              </div>
            </div>

            <div class="stats mt-1 shadow">
              <div class="stat">
                <div class="stat-title">Level</div>
                <div class="stat-value text-lg" id="input-video-level"></div>
              </div>

              <div class="stat">
                <div class="stat-title">Profile</div>
                <div class="stat-value text-lg" id="input-video-profile"></div>
              </div>

              <div class="stat">
                <div class="stat-title">Bandwidth</div>
                <div class="stat-value text-lg" id="input-video-bw"></div>
              </div>
            </div>

            <h2 class="mt-3 text-lg">Audio</h2>
            <div class="stats mt-1 shadow">
              <div class="stat">
                <div class="stat-title">Codec</div>
                <div class="stat-value text-lg" id="input-audio-codec"></div>
              </div>

              <div class="stat">
                <div class="stat-title">Channels</div>
                <div class="stat-value text-lg" id="input-audio-channels"></div>
              </div>

              <div class="stat">
                <div class="stat-title">Sample Rate</div>
                <div class="stat-value text-lg" id="input-audio-sample-rate"></div>
              </div>
            </div>

            <div class="stats mt-1 shadow">
              <div class="stat">
                <div class="stat-title">Profile</div>
                <div class="stat-value text-lg" id="input-audio-profile"></div>
              </div>

              <div class="stat">
                <div class="stat-title">Bandwidth</div>
                <div class="stat-value text-lg" id="input-audio-bw"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Column -->
      <div class="bg-base-200 rounded-xl p-4 shadow">
        <h2 class="mb-3 text-xl font-bold">Outputs</h2>

        <div class="space-y-3">
          <div class="card bg-base-100 p-4 shadow">
            <h3 class="font-semibold">YouTube</h3>
            <p class="text-sm opacity-70">rtmp://youtube.com/live/streamkey</p>
          </div>

          <div class="card bg-base-100 p-4 shadow">
            <h3 class="font-semibold">Facebook</h3>
            <p class="text-sm opacity-70">rtmp://facebook.com/live/12345</p>
          </div>

          <div class="card bg-base-100 p-4 shadow">
            <h3 class="font-semibold">Backup RTMP</h3>
            <p class="text-sm opacity-70">rtmp://backupserver/live/abc123</p>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
